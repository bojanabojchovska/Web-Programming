<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Movie Ticket Order page - Welcome and choose a Movie</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        body {
            width: 800px;
            margin: auto;
        }
    </style>
</head>
<body>
<header>
    <h1>Welcome to our Movie Ticket Shop App</h1>
</header>
<main>
    <!-- Filter form -->
    <form id="filterForm">
        <div class="form-group">
            <label for="movieName">Filter by Title:</label>
            <input type="text" class="form-control" id="movieName" name="movieName">
        </div>
        <div class="form-group">
            <label for="rating">Filter by Rating:</label>
            <input type="number" class="form-control" id="rating" name="rating" min="0" max="10">
        </div>
        <button id="filter" type="submit">Filter</button>
    </form>

    <h2>Choose movie:</h2>

    <table>
        <tr class="item" th:each="movie : ${movies}">
            <td>
                <input type="radio" th:name="'selectedMovie'" th:value="${movie.getId()}"
                       onclick="document.getElementById('selectedMovieId').value = this.value;">
            </td>
            <td th:text="${movie.getTitle()}"></td>
            <td th:text="${movie.getSummary()}"></td>
            <td th:text="${movie.getRating()}"></td>
            <td>

                <form th:method="post" th:action="@{'/movies/{id}/delete' (id=${movie.getId()})}">
                    <button type="submit" class="btn btn-sm btn-danger delete-product">Delete</button>
                </form>
                <a th:href="@{'/movies/{id}/edit' (id=${movie.getId()})}" class="btn btn-sm btn-info edit-product">
                    <i class="fas fa-edit"></i> Edit
                </a>
                <form th:method="post" th:action="@{'/movies/{id}/rate' (id=${movie.getId()})}">
                    <button type="submit" class="like-item">Rate</button>
                </form>
            </td>
        </tr>
    </table>

    <div>

        <a href="/movies/add" class="btn btn-primary add-item">
            Add new movie
        </a>

    </div>

    <form id="orderForm" th:action="@{'/ticketOrder'}" th:method="GET">
        <!-- Hidden input to store selected movie ID -->
        <input type="hidden" id="selectedMovieId" name="selectedMovie" value="">
        <h2>Choose number of tickets:</h2>
        <input type="number" name="numTickets" min="1" max="10"><br/><br/>
        <input type="submit" value="Submit">
    </form>
</main>

</body>
</html>
