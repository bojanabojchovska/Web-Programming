<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Movie Ticket Order page - Welcome and choose a Movie</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        body {
            max-width: 800px;
            margin: auto;
            background-color: #faf0e6; /* Background color for the whole page */
            color: #333333; /* Text color to ensure readability */
        }
        header {
            margin-bottom: 20px;
            text-align: center;
        }
        h1, h2 {
            color: #333333;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
            background-color: #fff; /* Ensure table background is white for readability */
        }
        .table th, .table td {
            vertical-align: middle; /* Center-align content vertically */
        }
        .btn {
            margin-top: 5px;
        }
    </style>
</head>
<body>
<header style="margin-top: 20px;">
    <div class="d-flex justify-content-between align-items-center">
        <h1 style="margin-top: 20px;">Welcome to CineLux</h1>
        <div>
            <a href="/login" class="btn btn-outline-primary">Login</a>
            <a href="/register" class="btn btn-outline-success">Register</a>
        </div>
    </div>
</header>

<main>
    <!-- Filter form -->
    <form id="filterForm" class="mb-4">
        <div class="form-row align-items-end">
            <div class="form-group col-md-5">
                <label for="movieName">Filter by Title:</label>
                <input type="text" class="form-control" id="movieName" name="movieName">
            </div>
            <div class="form-group col-md-5">
                <label for="rating">Filter by Rating:</label>
                <input type="number" class="form-control" id="rating" name="rating" min="0" max="10">
            </div>
            <div class="form-group col-md-2">
                <button id="filter" type="submit" class="btn btn-primary w-100">Filter</button>
            </div>
        </div>
    </form>

    <h2>Choose movie:</h2>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>Select</th>
            <th>Title</th>
            <th>Summary</th>
            <th>Rating</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr class="item" th:each="movie : ${movies}">
            <td>
                <input type="radio" th:name="'selectedMovie'" th:value="${movie.getId()}"
                       onclick="document.getElementById('selectedMovieId').value = this.value;">
            </td>
            <td th:text="${movie.getTitle()}"></td>
            <td th:text="${movie.getSummary()}"></td>
            <td th:text="${movie.getRating()}"></td>
            <td>
                <form th:method="post" th:action="@{'/movies/{id}/delete' (id=${movie.getId()})}" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger delete-product">Delete</button>
                </form>
                <a th:href="@{'/movies/{id}/edit' (id=${movie.getId()})}" class="btn btn-sm btn-info edit-product">
                    Edit
                </a>
                <form th:method="post" th:action="@{'/movies/{id}/rate' (id=${movie.getId()})}" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-success like-item">Rate</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <div class="text-right mb-4">
        <a href="/movies/add" class="btn btn-primary add-item">
            Add new movie
        </a>
    </div>

    <form id="orderForm" th:action="@{'/ticketOrder'}" th:method="GET">
        <!-- Hidden input to store selected movie ID -->
        <input type="hidden" id="selectedMovieId" name="selectedMovie" value="">
        <h2>Choose number of tickets:</h2>
        <div class="form-group">
            <input type="number" class="form-control" name="numTickets" min="1" max="10">
        </div>
        <input type="submit" class="btn btn-primary" value="Submit">
    </form>
</main>

<!-- Optional: Include Bootstrap JS and jQuery (for Bootstrap JS) -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
